# OS01



> 前言：OS01 意思是 [Operating Systems: From 0 to 1](https://tuhdo.github.io/os01/)。浏览了一些内容，感觉这应该是一个非常好的学习操作系统的资料。对我来说，翻译它应该是一个非常大的挑战，因为这不是一篇文章，这是一本书。话不多说，开干吧。——2019.4.29





## [操作系统：从 0 到 1](https://tuhdo.github.io/os01/)



这本书将帮助你获得从 0 开始写操作系统的基础知识。注意！真的是从 0 到 1。



读完这本书，你至少会学习到：



+ 如何通过阅读硬件数据手册（hardware datasheets）从头开始写一个操作系统。在实际工作中，写操作系统的流程就是如此，你无法简单地通过 Google 获取答案。
+ 从硬件到软件，全面了解计算机的层与层之间是如何关联的
+ 独立编写代码的能力。复制粘贴代码毫无意义。只有当你自己解决问题的时候，才是你学到东西的时候。书上会给出一些例子来启发你，但多数问题还是应该由你自己去克服。不要害怕，问题的答案还是会给你的，但仅供尝试后自我检验哟~
+ 熟悉 Linux 的开发环境以及熟练使用通用的底层开发工具
+ 深入理解 x86 汇编
+ 如何构建操作系统能够顺利运行的程序
+ 如何使用 gdb 和 QEMU 调试一个直接跑在硬件上的程序。
+ 用纯 C 链接和加载裸机 x86_64。没有标准库，也没有运行时开销。



**[下载这本书](https://github.com/tuhdo/os01/blob/master/Operating_Systems_From_0_to_1.pdf)**





### 本书教学方法

> 授人以鱼不如授人以渔



 上面这句话一直是我写作本书的指导思想。这本书不会试图把所有的东西教给你，但是用来自学已经足够了。从这个意义上来讲，这本书本身可以说“完成度”相当高了。一旦你学完了 part1 和 part2（共计八个章节），你就可以丢掉本书，开始完全自学了。此时，聪明的读者实际上就应该开始自学了。比如，他们可以继续学习 [OSDev wiki](http://wiki.osdev.org/Main_Page)。当然认真说起来，在你学习完 part1 和 part2 的所有内容以后，你也不过是满足了 OSDev wiki 的[最低要求](http://wiki.osdev.org/Required_Knowledge)（好吧，有点夸张了 ，事实上我们比最低要求学得更深入一些）。或者说，要是你认为仅仅出于兴趣来开发一个操作系统是不切实际的，那么你还可以阅读针对 Linux 的书籍，比如免费的 [Linux Insides](https://0xax.gitbooks.io/linux-insides/content/)，或其他备受推崇的关于 Linux 内核的书也行。这本书会尽全力帮你打下坚实的基础，这也是首先发布 part 1 和 part 2 的目的。





本书会教给你一些核心概念，比如 x86 汇编，ELF，在裸机上调试与链接，等等。但更重要的是**如何获取这些信息**。比如说，本书不仅教你 x86 汇编语言相关知识，还会教你“如何使用英特尔的参考手册”。学习阅读官方手册很重要，因为只有硬件制造商自己才最能理解他们生产的硬件的工作原理。如果你只是从二手资源中学习（仅仅因为这样做更容易），就永远也无法彻底理解你正在其上编程的硬件。你有没有看过关于汇编的书，又是否想知道书上那些信息都来自哪里？作者又如何知道他所说的一切都是正确的？一个人是如何对硬件编程这么了解的？这些问题都能在本书中找到答案。



举个例子，你应该速览整个第 4 章 "x86 汇编和 C"，看看书上是怎么样利用 Intel 参考手册第二卷的。在这个过程中，本书将会教会你如何使用官方参考手册。



第 3 部分规划为一系列说明，读者可以按照说明来完成操作系统的每个组件。除了少量示例外，第 3 部分不会包含任何代码。第 3 部分是通过给出阅读提示、解释困难概念以及解释使用手册进行调试的方法来节省读者阅读官方手册的时间。简而言之，具体实现有赖于读者自己的努力；而第 3 部分这些章节就好像大学里的作业一样。



### 预备知识

本书假定你知道：

一些电路概念：

+ 基本电学概念：原子，电子，质子，中子，电流。
+ 欧姆定律

但是，如果你对电学一无所知，可以点击[此处](http://www.allaboutcircuits.com/textbook/)，阅读其中的第 1 章和第 2 章来快速了解。



C 语言编程知识。尤其是：

+ 变量和函数声明/定义
+ `while` 和 `for` 循环 
+ 指针和函数指针 
+ C 中的基本算法和数据结构知识



Linux 基础：



+ 知道如何使用命令行打开目录
+ 知道如何使用选项调用命令 
+ 知道如何将输出管道传输到另一个程序



盲打的能力。由于我们使用的是 Linux 系统，因此盲打的能力会很有用。我知道打字速度并不能帮助你解决问题，但至少你的打字速度应该足够快，不要让它降低学习体验。



### 章节状态



- 第一部分
  - 第 1 章：完成
  - 第 2 章：完成
  - 第 3 章： 接近完成。本书目前依赖于英特尔手册来全面解释 x86 执行环境。
  - 第 4 章：完成
  - 第 5 章：完成
  - 第 6 章：完成
- 第二部分
  - 第 7 章：完成
  - 第 8 章：完成
- 第三部分
  - 第 9 章：未完成  
  - 第 10 章：未完成
  - 第 11 章：未完成
  - 第 12 章：未完成
  - 第 13 章：未完成

    ……还有一些可能的章节不在规划内……

在未来，我希望对第 3 部分进行扩展，而不仅仅是涵盖前两部分。但就目前而言，我将优先尽量完成上述章节。



### 示例 OS



[这个仓库](https://github.com/tuhdo/sample-os)是本书的示例 OS，旨在作为第 3 部分的参考内容。其中包含“系统编程指南”（Intel 参考手册第三卷） 10 个章节的内容，以及用于输入和输出的简单键盘和视频驱动程序。但是目前只实现了以下功能：



+ 保护模式
+ 使用 TSS（Task State Structure）创建和管理进程。
+ 中断 
+ LAPIC



分页和 I/O 尚未实现。随着本书的进展，我会尽力去一一实现。





### 贡献

如果你发现任何语法问题，请使用 GitHub 提 Issues。或者，如果某些句子或段落难以理解，请尽管使用以下标题格式提交 issue：`[page number][type] Descriptive Title`



举个例子：`[pg.9][grammar] Incorrect verb usage`



`type` 可以为以下的内容



+ `Typo` 表示打字错误
+ `Grammar` 表示语法使用不正确
+ `Style` 表示格式改进
+ `Content` 表示内容有问题



还有种更好的做法是，使用 pull request 帮助我修改本书内容。本书的主要内容位于 `Operating Systems: From 0 to 1.lyx` 文件中。你可以编辑 `.txt` 文件，然后我将手动整合更改。由于 Lyx 可能导致巨大的差异，使得无法审查变化，因此这种做法是目前一个不错的变通方案。



这本书还在持续写作中，如果我的英语让你恼火，还请多多包涵一下。对此，我真的非常感激。 



最后，如果你喜欢这个项目，并且可能的话，请捐赠来帮助这个项目继续下去。



### 有问题怎么办？



如果你对本书的内容或写作有任何疑问，欢迎来提 [issue](https://github.com/tuhdo/os01/issues/new)。







